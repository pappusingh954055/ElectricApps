<div class="container-fluid" [class.disabled-content]="isDashboardLoading">
  <div *ngIf="isLowStockFilterActive" class="filter-alert-banner">
    <div class="alert-content">
      <mat-icon>report_problem</mat-icon>
      <span>Dashboard Alert: Showing only <b>Low Stock</b> items.</span>
    </div>
    <button mat-button class="view-all-btn" (click)="clearFilter()">
      VIEW ALL PRODUCTS
    </button>
  </div>

  <div class="header-actions">
    <h1 class="page-title m-0">All Products</h1>
    <div class="d-flex gap-2">
      <button *ngIf="isLowStockFilterActive && selectedRows.length > 1" mat-raised-button class="reorder-action-btn" (click)="bulkReorder()">
        <mat-icon>shopping_cart_checkout</mat-icon>
        Bulk Reorder ({{selectedRows.length}})
      </button>

      <button *ngIf="selectedRows.length > 0" mat-raised-button color="warn" class="delete-action-btn" (click)="confirmBulkDelete()" [disabled]="loading">
        <mat-icon>delete_sweep</mat-icon>
        Delete Selected ({{selectedRows.length}})
      </button>
      <button mat-raised-button class="main-add-btn" routerLink="/app/master/products/add" [disabled]="loading">
        <mat-icon>add</mat-icon>
        New Product
      </button>
    </div>
  </div>

  <app-summary-stats [stats]="summaryStats" [isLoading]="isDashboardLoading"></app-summary-stats>

  <div class="list-container">
    <div class="grid-wrapper">
      <app-server-datagrid [columns]="columns" [data]="data" [totalCount]="totalCount" [loading]="loading && !isDashboardLoading" gridKey="product-grid"
        (loadData)="loadPriceLists($event)" (editAction)="onEdit($event)" (selectionChange)="onSelectionChange($event)" (edit)="onEdit($event)"
        (delete)="deleteProduct($event[0])">
      </app-server-datagrid>
    </div>
  </div>
</div>