<div class="invoice-page" [formGroup]="invoiceForm">

  <!-- ================= LEFT SIDE ================= -->
  <div class="editor">

    <h2>Create Your First Invoice</h2>

    <div class="grid-2">
      <mat-form-field appearance="outline">
        <mat-label>Customer Name</mat-label>
        <input matInput formControlName="customerName">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Customer Phone</mat-label>
        <input matInput formControlName="customerPhone">
      </mat-form-field>
    </div>

    <!-- ITEMS -->
    <table class="edit-table" formArrayName="items">
      <thead>
        <tr>
          <th>#</th>
          <th>Item</th>
          <th>Qty</th>
          <th>Price</th>
          <th>Discount %</th>
          <th>Total</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let row of items.controls; let i = index" [formGroupName]="i">
          <td>{{ i + 1 }}</td>
          <td><input matInput formControlName="name"></td>
          <td><input matInput type="number" formControlName="qty" (input)="update(i)"></td>
          <td><input matInput type="number" formControlName="price" (input)="update(i)"></td>
          <td><input matInput type="number" formControlName="discount" (input)="update(i)"></td>
          <td>{{ row.get('amount')?.value }}</td>
        </tr>
      </tbody>
    </table>

    <button mat-button color="primary" (click)="addItem()">+ Add Row</button>

    <div class="total-box">
      <b>Total Amount (₹)</b>
      <span>{{ invoiceForm.get('total')?.value }}</span>
    </div>

  </div>

  <!-- ================= RIGHT SIDE ================= -->
  <div class="preview">

    <h2 class="center">Tax Invoice</h2>

    <div class="company">
      <b>My Company</b>
      <p>Phone: 8088377282</p>
    </div>

    <div class="invoice-info">
      <p><b>Invoice No:</b> {{ invoiceForm.get('invoiceNo')?.value }}</p>
      <p><b>Date:</b> {{ invoiceForm.get('invoiceDate')?.value | date }}</p>
    </div>

    <table class="preview-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Item</th>
          <th>Qty</th>
          <th>Price</th>
          <th>Amount</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let row of items.controls; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ row.get('name')?.value }}</td>
          <td>{{ row.get('qty')?.value }}</td>
          <td>₹ {{ row.get('price')?.value }}</td>
          <td>₹ {{ row.get('amount')?.value }}</td>
        </tr>
      </tbody>
    </table>

    <div class="preview-total">
      <b>Total:</b> ₹ {{ invoiceForm.get('total')?.value }}
    </div>

    <div class="sign">
      Authorized Signatory
    </div>

  </div>

</div>
