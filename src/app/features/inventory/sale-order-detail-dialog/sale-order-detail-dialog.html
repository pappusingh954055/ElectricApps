<div class="dialog-container">
  
  <!-- Header -->
  <div class="header-p">
    <div class="company-header-group">
      <img *ngIf="companyInfo?.logoUrl" [src]="getImgUrl(companyInfo?.logoUrl)" class="dialog-logo" alt="Logo">
      <div class="company-text">
        <h1>{{companyInfo?.name || 'ELECTRIC INVENTORY'}}</h1>
        <div class="meta-row" *ngIf="companyInfo?.address">
          {{companyInfo?.address?.addressLine1}}, {{companyInfo?.address?.city}} - {{companyInfo?.address?.pinCode}}
        </div>
        <div class="meta-row">
          Ph: {{companyInfo?.primaryPhone}} | {{companyInfo?.primaryEmail}}
        </div>
      </div>
    </div>

    <div class="order-title-group">
      <h2>ORDER #{{data.soNumber}}</h2>
      <span class="status-pill" [ngClass]="data.status?.toLowerCase()">{{data.status}}</span>
    </div>

    <button mat-icon-button mat-dialog-close class="close-btn">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Scrollable Content -->
  <div mat-dialog-content class="content-body">
    
    <!-- Info Grid -->
    <div class="info-card">
      <div class="info-group">
        <label>Customer Name</label>
        <div class="value">{{data.customerName || 'N/A'}}</div>
      </div>
      <div class="info-group">
        <label>Order Date</label>
        <div class="value">{{data.soDate | date:'dd MMM yyyy'}}</div>
      </div>
      <div class="info-group">
        <label>Current Status</label>
        <div class="value status-badge" [ngClass]="data.status?.toLowerCase()">{{data.status}}</div>
      </div>
    </div>

    <!-- Items Table -->
    <div class="items-table-container">
      <table class="items-table">
        <thead>
          <tr>
            <th class="col-idx text-center">#</th>
            <th class="col-product">Product Name</th>
            <th class="col-qty text-center">Qty</th>
            <th class="col-rate text-right">Rate</th>
            <th class="col-total text-right">Total</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of data.items; let i = index">
            <td class="text-center text-muted">{{i + 1}}</td>
            <td>{{item.productName}}</td>
            <td class="text-center">{{item.qty}}</td>
            <td class="text-right">{{item.rate | currency:'INR':'symbol':'1.2-2'}}</td>
            <td class="text-right">{{(item.qty * item.rate) | currency:'INR':'symbol':'1.2-2'}}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Summary Section -->
    <div class="invoice-summary">
        <div class="summary-row">
            <span class="label">Sub Total</span>
            <span class="value">{{(data.subTotal || 0) | currency:'INR':'symbol':'1.2-2'}}</span>
        </div>
        <div class="summary-row">
            <span class="label">Total Tax</span>
            <span class="value">{{(data.totalTax || 0) | currency:'INR':'symbol':'1.2-2'}}</span>
        </div>
        <div class="summary-row grand-total">
            <span class="label">Grand Total</span>
            <span class="value">{{(data.grandTotal || 0) | currency:'INR':'symbol':'1.2-2'}}</span>
        </div>
    </div>

  </div>

  <!-- Footer Actions -->
  <div mat-dialog-actions class="dialog-actions">
    <button mat-stroked-button color="primary" (click)="print()">
      <mat-icon>print</mat-icon> Print
    </button>
    <button mat-stroked-button mat-dialog-close color="warn">Close</button>
  </div>

</div>