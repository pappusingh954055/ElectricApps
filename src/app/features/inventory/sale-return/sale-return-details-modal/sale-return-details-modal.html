<div class="modal-container">
  <div class="modal-header">
    <h2>Credit Note Details - {{data.returnNumber}}</h2>
    <span class="date-text">Date: {{data.returnDate | date:'dd MMM yyyy'}}</span>
  </div>

  <div class="info-grid">
    <div class="info-item">
      <span class="label">Customer Name</span>
      <span class="value">{{data.customerName || 'Processing...'}}</span>
    </div>
    <div class="info-item">
      <span class="label">Sales Order Reference</span>
      <span class="value">{{data.soNumber || 'N/A'}}</span>
    </div>
  </div>

  <table class="items-table">
    <thead>
      <tr>
        <th>Product Name</th>
        <th style="text-align: center;">Qty</th>
        <th style="text-align: right;">Rate</th>
        <th style="text-align: center;">Tax%</th>
        <th style="text-align: right;">Total</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of data.items">
        <td>{{item.productName}}</td>
        <td style="text-align: center;">{{item.qty | number:'1.2-2'}}</td>
        <td style="text-align: right;">{{item.rate | currency:'INR':'symbol':'1.2-2'}}</td>
        <td style="text-align: center;">{{item.taxPercent}}%</td>
        <td style="text-align: right;">{{item.total | currency:'INR':'symbol':'1.2-2'}}</td>
      </tr>
    </tbody>
  </table>

  <div class="footer-section">
    <div class="summary-card">
      <div class="summary-line">
        <span>Sub-Total:</span>
        <span>{{data.subTotal | currency:'INR'}}</span>
      </div>
      <div class="summary-line">
        <span>Total Tax:</span>
        <span>{{data.totalTax | currency:'INR'}}</span>
      </div>
      <div class="total-line">
        <span>Grand Total:</span>
        <span>{{data.grandTotal | currency:'INR'}}</span>
      </div>
    </div>
  </div>

  <mat-dialog-actions align="end" style="margin-top: 20px; padding: 0;">
    <button mat-button (click)="onClose()">Close</button>
    <button mat-raised-button color="primary" (click)="printPDF()">
      <mat-icon style="margin-right: 5px;">print</mat-icon> Print PDF
    </button>
  </mat-dialog-actions>
</div>