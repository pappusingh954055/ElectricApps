<h2 mat-dialog-title class="dialog-header">
  <span>Purchase Return Details - {{data.returnNumber}}</span>
  <span class="flex-spacer"></span>
  <button mat-icon-button mat-dialog-close>
    <mat-icon>close</mat-icon>
  </button>
</h2>

<mat-dialog-content class="p-4">
  <div class="row mb-4">
    <div class="col-md-6 border-end">
      <div class="detail-row"><span class="label">Supplier:</span> <span class="value">{{data.supplierName}}</span></div>
      <div class="detail-row"><span class="label">Return Date:</span> <span class="value">{{data.returnDate | date:'mediumDate'}}</span></div>
      <div class="detail-row">
  <span class="label">Status:</span> 
  <span class="status-badge" 
        [ngClass]="{
          'completed': data?.status === 'Completed' || data?.status === 'Confirmed'
        }">
    {{ data?.status }}
  </span>
</div>
    </div>
    <div class="col-md-6 ps-4">
      <div class="detail-row"><span class="label">GRN Reference:</span> <span class="value">{{data.items[0]?.grnRef}}</span></div>
      <div class="detail-row"><span class="label">Remarks:</span> <span class="value">{{data.remarks || 'N/A'}}</span></div>
    </div>
  </div>

  <table mat-table [dataSource]="data.items" class="mat-elevation-z0 border">
    <ng-container matColumnDef="productName">
      <th mat-header-cell *matHeaderCellDef> Product </th>
      <td mat-cell *matCellDef="let item"> {{item.productName}} </td>
    </ng-container>

    <ng-container matColumnDef="qty">
      <th mat-header-cell *matHeaderCellDef class="text-end"> Qty </th>
      <td mat-cell *matCellDef="let item" class="text-end"> {{item.returnQty}} </td>
    </ng-container>

    <ng-container matColumnDef="rate">
      <th mat-header-cell *matHeaderCellDef class="text-end"> Rate </th>
      <td mat-cell *matCellDef="let item" class="text-end"> {{item.rate | currency:'INR'}} </td>
    </ng-container>

    <ng-container matColumnDef="total">
      <th mat-header-cell *matHeaderCellDef class="text-end"> Total </th>
      <td mat-cell *matCellDef="let item" class="text-end"> {{item.totalAmount | currency:'INR'}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="['productName', 'qty', 'rate', 'total']"></tr>
    <tr mat-row *matRowDef="let row; columns: ['productName', 'qty', 'rate', 'total'];"></tr>
  </table>

  <div class="d-flex justify-content-end mt-3 p-3 bg-light">
    <div class="text-end">
      <div>Sub-Total: <strong>{{data.subTotal | currency:'INR'}}</strong></div>
      <div class="text-danger">Tax (GST): <strong>{{data.taxAmount | currency:'INR'}}</strong></div>
      <hr>
      <div class="h5">Grand Total: <strong>{{data.grandTotal | currency:'INR'}}</strong></div>
    </div>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end" class="p-3">
  <button mat-button mat-dialog-close color="warn">Close</button>
  <button mat-raised-button color="primary" (click)="print()">Print Details</button>
</mat-dialog-actions>